name: Deploy to Staging

on:
  push:
    branches:
      - main
      - master
    
    workflow_dispatch:
      
    jobs:
      build-and-deploy:
      runs-on: ubuntu-latest
      
      steps:
        - name: Checkout Repository
          uses: actions/checkout@v3
        
        - name: Set up Node
          uses: actions/setup-node@v3
          with:
            node-version: 18
        
        - name: Install Dependencies
          run: npm install
        
        - name: Build Project
          run: npm run build --if-present
        
        - name: Run TypeScript Check
          run: npm run type-check --if-present
        
        - name: Deploy to Staging Server
          env:
            STAGING_HOST: ${{ secrets.STAGING_HOST }}
            STAGING_USER: ${{ secrets.STAGING_USER }}
            STAGING_KEY: ${{ secrets.STAGING_KEY }}
          run: |
          echo "Deploying to staging..."
          # Replace this with your developerâ€™s actual staging deployment script
          # Example:
          # rsync -avz --delete dist/ $STAGING_USER@$STAGING_HOST:/var/www/staging/
